{"version":3,"sources":["webpack:///D:/UniAppProject/fd/fd/components/config/config.vue?bf7a","webpack:///D:/UniAppProject/fd/fd/components/config/config.vue?934a","webpack:///D:/UniAppProject/fd/fd/components/config/config.vue","webpack:///D:/UniAppProject/fd/fd/main.js","webpack:///D:/UniAppProject/fd/fd/pages/user/chat.vue?e5c0","webpack:///D:/UniAppProject/fd/fd/pages/user/chat.vue?53c9","webpack:///D:/UniAppProject/fd/fd/pages/user/chat.vue?a9e2","webpack:///D:/UniAppProject/fd/fd/pages/user/chat.vue?b37a","webpack:///D:/UniAppProject/fd/fd/pages/user/chat.vue","webpack:///D:/UniAppProject/fd/fd/pages/user/chat.vue?a011","webpack:///D:/UniAppProject/fd/fd/pages/user/chat.vue?028b"],"names":["httpUrl","wsUrl","txtshow","mess","uni","showToast","icon","title","duration","newwebsocket","connectSocket","url","protocols","value","createPage","Page","data","talkList","ajax","rows","page","flag","loading","loadText","content","rid","myself","id","user_name","avatar","created_at","onLoad","option","name","that","parseInt","$nextTick","getHistoryMsg","setNavigationBarTitle","getmyself","onSocketMessage","res","console","log","JSON","parse","push","pageScrollTo","scrollTop","navigateTo","onPageScroll","e","methods","getStorageSync","request","config","method","header","success","jsondata","code","nickname","msg","fail","get","hideLoadTips","joinHistoryMsg","selector","length","setPageScrollTo","setTimeout","Promise","done","arr","i","reverse","view","createSelectorQuery","in","select","boundingClientRect","top","exec","send","message","type","sendSocketMessage","stringify","showLoading","hideLoading","sendpic","chooseImage","count","sizeType","image","tempFiles","uploadFile","filePath","formData","uploadFileRes","tmppath","browse","path","previewImage","urls"],"mappings":"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","file":"pages/user/chat.js","sourcesContent":["var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./config.vue?vue&type=script&lang=js&\"\nexport * from \"./config.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"UniAppProject/fd/fd/components/config/config.vue\"\nexport default component.exports","import mod from \"-!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./config.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./config.vue?vue&type=script&lang=js&\"","//\n\nconst httpUrl = 'http://192.168.0.5:3000'\nconst wsUrl='ws://192.168.0.5:3000'\nfunction txtshow(mess){\n\tuni.showToast({\n\t\ticon:\"none\",\n\t    title: mess,\n\t    duration: 2000\n\t});\n}\n    function newwebsocket() {\n        uni.connectSocket({\n                 url: wsUrl+'/api/v1/user/websocket',\n                 protocols: [value],\n               });\n    }\n    // 暴露出这些属性和方法\n    export default {\n        httpUrl,\n\t\twsUrl,\n\t\ttxtshow,\n\t\tnewwebsocket,\n    }\n","import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/user/chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chat.vue?vue&type=template&id=0c6650ec&\"\nvar renderjs\nimport script from \"./chat.vue?vue&type=script&lang=js&\"\nexport * from \"./chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"UniAppProject/fd/fd/pages/user/chat.vue\"\nexport default component.exports","export * from \"-!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=template&id=0c6650ec&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport config from '../../components/config/config.vue'\nexport default {\n\t\n\tdata() {\n\t\treturn {\n\t\t\ttalkList:[],\n\t\t\tajax:{\n\t\t\t\trows:20,\t//每页数量\n\t\t\t\tpage:1,\t//页码\n\t\t\t\tflag:true,\t// 请求开关\n\t\t\t\tloading:true,\t// 加载中\n\t\t\t\tloadText:'正在获取消息'\n\t\t\t},\n\t\t\tcontent:'',\n\t\t\trid:0,// 接收者id\n\t\t\tmyself:{\n\t\t\t\tid:0,\n\t\t\t\tuser_name:\"\",\n\t\t\t\tavatar:\"../../static/nickname.png\",\n\t\t\t\tcreated_at:0,\t\t\t\t\n\t\t\t}\n\t\t}\n\t},\n\tonLoad:function(option) {\n\t\tif(option.id && option.name ){\n\t\t\tvar that=this\n\t\t\tthis.rid=parseInt(option.id)\t\t\n\t\t\tthis.$nextTick(()=>{\n\t\t\t\tthis.getHistoryMsg();\t\t\t\t\t\n\t\t\t});\t\t\n\t\t\t\t\t\t\t\t\t\n\t\t\tuni.setNavigationBarTitle({\n\t\t\t　　title:\"正在与 \"+option.name+\" 交流\"\n\t\t\t})\t\t\t\t\n\t\t\tthis.getmyself()\n\t\t\t\n\t\t\t//接收服务端发来的信息\n\t\t\tuni.onSocketMessage(function (res) {\n\t\t\t\t  console.log('收到服务器内容：' + res.data);\n\t\t\t\t  var mess=JSON.parse(res.data)\n\t\t\t\t  if(mess[\"code\"]==200){\n\t\t\t\t\t// setTimeout(()=>{\n\t\t\t\t  \t// 将当前发送信息 添加到消息列表。\n\t\t\t\t  \tlet data = {\n\t\t\t\t  \t\t\"id\":mess[\"sid\"],\n\t\t\t\t\t\t\"name\":mess[\"sname\"],\n\t\t\t\t  \t\t\"content\":mess[\"content\"],\n\t\t\t\t  \t\t\"s_or_r\":0,\n\t\t\t\t  \t\t\"pic\":mess[\"savatar\"],\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\"time\":mess[\"time\"]\t,\n\t\t\t\t\t\t\"type\":mess[\"type\"]\t\t\n\t\t\t\t\t\t\n\t\t\t\t  \t}\n\t\t\t\t  \tthat.talkList.push(data);\n\t\t\t\t\t//将回调延迟到下次 DOM 更新循环之后执行。在修改数据之后立即使用它，然后等待 DOM 更新。它跟全局方法 Vue.nextTick 一样，不同的是回调的 this 自动绑定到调用它的实例上。\n\t\t\t\t  \tthat.$nextTick(()=>{\n\t\t\t\t  \t\tuni.pageScrollTo({\n\t\t\t\t  \t\t    scrollTop: 999999,\t// 设置一个超大值，以保证滚动条滚动到底部\n\t\t\t\t  \t\t    duration: 0\n\t\t\t\t  \t\t});\n\t\t\t\t  \t})\n\t\t\t\t\t\n\t\t\t\t\t// // },1500);\n\t\t\t\t}else{\n\t\t\t\t\t//其他\n\t\t\t\t}\n\t\t\t\t  \t\t\t\t\t  \t\t\t\t\t \t\t\t\t  \n\t\t\t});\n\t\t\t\n\t\t}else{\n\t\t\tuni.navigateTo({\n\t\t\t    url: '../show/message'\n\t\t\t});\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t\n\t},\n\tonPageScroll(e){\n\t\tif(e.scrollTop<5){\n\t\t\tthis.getHistoryMsg();\n\t\t}\n\t},\n\tmethods: {\n\t\t//获取个人信息\n\t\tgetmyself(){\n\t\t\tvar value = uni.getStorageSync('token');\n\t\t\tif(value){\n\t\t\t  \tuni.request({\n\t\t\t  \t    url: config.httpUrl +'/api/v1/user/me',\n\t\t\t  \t\tmethod:\"GET\",\n\t\t\t  \t    header: {\n\t\t\t  \t       'content-type': 'application/x-www-form-urlencoded',\n\t\t\t  \t\t   'Authorization' : value,\n\t\t\t  \t    },\n\t\t\t  \t    success: (res) => {\n\t\t\t  \t\t\tvar jsondata=res.data\n\t\t\t  \t\t\tif(jsondata.code=='0'){\n\t\t\t  \t\t\t\tthis.myself.name=jsondata.data.nickname\n\t\t\t\t\t\t\tif(jsondata.data.avatar){\n\t\t\t\t\t\t\t\tthis.myself.avatar=jsondata.data.avatar\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.myself.id=jsondata.data.id\n\t\t\t\t\t\t\tthis.myself.created_at=jsondata.data.created_at\t\t\t\t\t\t\n\t\t\t  \t\t\t}else{\n\t\t\t  \t\t\t\t config.txtshow(jsondata.msg)\t\t\t\t  \t\t\t\t\n\t\t\t  \t\t\t}\t\t\t\t\t\t\t\t\n\t\t\t  \t    },\n\t\t\t  \t\tfail: () =>{  \n\t\t\t  \t\t\t config.txtshow('网络异常')\n\t\t\t  \t     }, \n\t\t\t  \t});\n\t\t\t}else{\n\t\t\t  \t//跳转到登录界面\n\t\t\t  \tuni.navigateTo({\n\t\t\t      url: 'login'\n\t\t\t  });\n\t\t\t    \n\t\t\t}\n\t\t\t\n\t\t},\n\t\t \n\t\t \n\t\t// 获取历史消息\n\t\tgetHistoryMsg(){\n\t\t\tif(!this.ajax.flag){\n\t\t\t\treturn; //\n\t\t\t}\n\t\t\t\n\t\t\t// 此处用到 ES7 的 async/await 知识，为使代码更加优美。不懂的请自行学习。\n\t\t\tlet get = async ()=>{\n\t\t\t\tthis.hideLoadTips();\n\t\t\t\tthis.ajax.flag = false;\n\t\t\t\tlet data = await this.joinHistoryMsg();\n\t\t\t\t\n\t\t\t\t// console.log('----- 模拟数据格式，供参考 -----');\n\t\t\t\t// console.log(data);\t// 查看请求返回的数据结构 \n\t\t\t\t\n\t\t\t\t// 获取待滚动元素选择器，解决插入数据后，滚动条定位时使用\n\t\t\t\tlet selector = '';\n\t\t\t\t\t\t\t\t\t\n\t\t\t\tif(this.ajax.page>1){\n\t\t\t\t\t// 非第一页，则取历史消息数据的第一条信息元素\n\t\t\t\t\tselector = `#msg-${this.talkList[0].id}`;\n\t\t\t\t}else{\n\t\t\t\t\t// 第一页，则取当前消息数据的最后一条信息元素\n\t\t\t\t\tselector = `#msg-${data[data.length-1].id}`;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 将获取到的消息数据合并到消息数组中\n\t\t\t\tthis.talkList = [...data,...this.talkList];\t\n\t\t\t\t\n\t\t\t\t// 数据挂载后执行，不懂的请自行阅读 Vue.js 文档对 Vue.nextTick 函数说明。\n\t\t\t\tthis.$nextTick(()=>{\n\t\t\t\t\t// 设置当前滚动的位置\n\t\t\t\t\tthis.setPageScrollTo(selector);\n\t\t\t\t\t\n\t\t\t\t\tthis.hideLoadTips(true);\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\tif(data.length < this.ajax.rows){\n\t\t\t\t\t\t// 当前消息数据条数小于请求要求条数时，则无更多消息，不再允许请求。\n\t\t\t\t\t\t// 可在此处编写无更多消息数据时的逻辑\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.ajax.page ++;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 延迟 200ms ，以保证设置窗口滚动已完成\n\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\tthis.ajax.flag = true;\n\t\t\t\t\t\t},200)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t}\n\t\t\tget();\n\t\t},\n\t\t// 拼接历史记录消息，正式项目可替换为请求历史记录接口\n\t\tjoinHistoryMsg(){\n\t\t\t// let join = ()=>{\n\t\t\t// \tlet arr = [];\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// \t// //通过当前页码及页数，模拟数据内容\n\t\t\t// \t// let startIndex = (this.ajax.page-1) * this.ajax.rows;\n\t\t\t// \t// let endIndex = startIndex + this.ajax.rows;\n\t\t\t// \t// for(let i = startIndex; i < endIndex; i++){\n\t\t\t// \t// \tarr.push({\n\t\t\t// \t// \t\t\"id\":i,\t// 消息的ID\n\t\t\t// \t// \t\t\"content\":`这是历史记录的第${i+1}条消息`,\t// 消息内容\n\t\t\t// \t// \t\t\"s_or_r\":Math.random() > 0.5 ? 1 : 0\t,// 此为消息类别，设 1 为发出去的消息，0 为收到对方的消息,\n\t\t\t// \t// \t\t\"pic\":\"/static/logo.png\"\t// 头像\n\t\t\t// \t// \t})\n\t\t\t// \t// }\n\t\t\t\t\n\t\t\t// \t/*\n\t\t\t// \t\t颠倒数组中元素的顺序。将最新的数据排在本次接口返回数据的最后面。\n\t\t\t// \t\t后端接口按 消息的时间降序查找出当前页的数据后，再将本页数据按消息时间降序排序返回。\n\t\t\t// \t\t这是数据的重点，因为页面滚动条和上拉加载历史的问题。\n\t\t\t// \t */\n\t\t\t// \treturn arr\n\t\t\t// }\n\t\t\t\n\t\t\t// 此处用到 ES6 的 Promise 知识，不懂的请自行学习。\n\t\t\treturn new Promise((done,fail)=>{\n\t\t\t\t// 无数据请求接口，由 setTimeout 模拟，正式项目替换为 ajax 即可。\n\t\t\t\t// setTimeout(()=>{\n\t\t\t\t// \tlet data = join();\n\t\t\t\t// \tdone(data);\n\t\t\t\t// },1500);\n\t\t\t\tlet arr = [];\n\t\t\t\tvar value = uni.getStorageSync('token');\n\t\t\t\t  if(value){\n\t\t\t\t  \tuni.request({\n\t\t\t\t  \t    url: config.httpUrl +'/api/v1/user/chathistory?id='+this.rid+'&offset='+this.talkList.length+'&limit=20',\n\t\t\t\t  \t\tmethod:\"GET\",\n\t\t\t\t  \t    header: {\n\t\t\t\t  \t\t   'Authorization' : value,\n\t\t\t\t  \t    },\n\t\t\t\t  \t    success: (res) => {\n\t\t\t\t  \t\t\tvar jsondata=res.data\n\t\t\t\t  \t\t\tif(jsondata.code=='0'){\n\t\t\t\t\t\t\t\tfor(let i=0;i<jsondata.data.length;i++){\n\t\t\t\t\t\t\t\t\tarr.push({\n\t\t\t\t\t\t\t\t\t\t\t\"id\":jsondata.data[i][\"sid\"],\t// 消息的ID\n\t\t\t\t\t\t\t\t\t\t\t\"name\":jsondata.data[i][\"name\"],\n\t\t\t\t\t\t\t\t\t\t\t\"content\":jsondata.data[i][\"content\"],\t// 消息内容\n\t\t\t\t\t\t\t\t\t\t\t\"s_or_r\":jsondata.data[i][\"sid\"]==this.myself.id ? 1 : 0\t,// 此为消息类别，设 1 为发出去的消息，0 为收到对方的消息,\n\t\t\t\t\t\t\t\t\t\t\t\"pic\":jsondata.data[i][\"savatar\"],\t// 头像\n\t\t\t\t\t\t\t\t\t\t\t\"time\":jsondata.data[i][\"time\"],\n\t\t\t\t\t\t\t\t\t\t\t\"type\":jsondata.data[i][\"type\"]\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t  \t\t\t\tarr.reverse();\n\t\t\t\t\t\t\t\tdone(arr)\n\t\t\t\t  \t\t\t}else{\n\t\t\t\t  \t\t\t\t config.txtshow(jsondata.msg)\t\t\t\t  \t\t\t\t\n\t\t\t\t  \t\t\t}\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t  \t    },\n\t\t\t\t  \t\tfail: () =>{  \n\t\t\t\t  \t\t\t config.txtshow('网络异常')\n\t\t\t\t  \t     }, \n\t\t\t\t  \t});\n\t\t\t\t  }else{\n\t\t\t\t  \t//跳转到登录界面\n\t\t\t\t  \tuni.navigateTo({\n\t\t\t\t      url: 'login'\n\t\t\t\t  });\n\t\t\t\t    \n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t},\n\t\t// 设置页面滚动位置\n\t\tsetPageScrollTo(selector){\n\t\t\tlet view = uni.createSelectorQuery().in(this).select(selector);\n\t\t\tview.boundingClientRect((res) => {\n\t\t\t\tuni.pageScrollTo({\n\t\t\t\t    scrollTop:res.top - 30,\t// -30 为多显示出大半个消息的高度，示意上面还有信息。\n\t\t\t\t    duration: 0\n\t\t\t\t});\n\t\t\t}).exec();\n\t\t},\n\t\t// 隐藏加载提示\n\t\thideLoadTips(flag){\n\t\t\tif(flag){\n\t\t\t\tthis.ajax.loadText = '消息获取成功';\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tthis.ajax.loading = false;\n\t\t\t\t},300);\n\t\t\t}else{\n\t\t\t\tthis.ajax.loading = true;\n\t\t\t\tthis.ajax.loadText = '正在获取消息';\n\t\t\t}\n\t\t},\n\t\t// 发送信息\n\t\tsend(){\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\tif(!this.content){\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle:'请输入有效的内容',\n\t\t\t\t\ticon:'none'\n\t\t\t\t})\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar message = { \n\t\t\t         rid: this.rid, \n\t\t\t         content:this.content,\n\t\t\t\t\t type:0\n\t\t\t    };\n\t\t\tuni.sendSocketMessage({\n\t\t\t\tdata:JSON.stringify(message)\n\t\t\t});\t\t\n\t\t\tuni.showLoading({\n\t\t\t\ttitle:'正在发送'\n\t\t\t})\n\t\t\tsetTimeout(()=>{\n\t\t\t\tuni.hideLoading();\n\t\t\t\t\n\t\t\t\t// 将当前发送信息 添加到消息列表。\n\t\t\t\tlet data = {\n\t\t\t\t\t\"id\":this.myself.id,\n\t\t\t\t\t\"content\":this.content,\n\t\t\t\t\t\"s_or_r\":1,\n\t\t\t\t\t\"pic\":this.myself.avatar,\n\t\t\t\t\t\"type\":0\n\t\t\t\t}\n\t\t\t\tthis.talkList.push(data);\n\t\t\t\t\n\t\t\t\tthis.$nextTick(()=>{\n\t\t\t\t\t// 清空内容框中的内容\n\t\t\t\t\tthis.content = '';\n\t\t\t\t\tuni.pageScrollTo({\n\t\t\t\t\t    scrollTop: 999999,\t// 设置一个超大值，以保证滚动条滚动到底部\n\t\t\t\t\t    duration: 0\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t},500);\n\t\t},\n\t\tsendpic(){\n\t\t\t// 从相册选择1张图\n\t\t\tvar that=this;\n\t\t\tuni.chooseImage({\n\t\t\t    count: 1,\n\t\t\t    sizeType: ['original', 'compressed'],\n\t\t\t    // sourceType: ['album'],\n\t\t\t    success: function(res) {\n\t\t\t        var image=res.tempFiles[0];//只取第一张\n\t\t\t\t\tconsole.log(image)\n\t\t\t\t\tvar value = uni.getStorageSync('token');\n\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\theader: {\n\t\t\t\t\t\t'Authorization' : value,\n\t\t\t\t\t\t},\n\t\t\t\t\t    url: config.httpUrl+'/api/v1/user/chatimage', \n\t\t\t\t\t    filePath:image[\"path\"],\n\t\t\t\t\t\tformData:{\n\t\t\t\t\t\t\t\"name\":image[\"name\"],\n\t\t\t\t\t\t\t\"size\":image[\"size\"]\n\t\t\t\t\t\t},\n\t\t\t\t\t    name: 'image',\n\t\t\t\t\t    success: function (uploadFileRes) {\n\t\t\t\t\t         if(JSON.parse(uploadFileRes.data)[\"code\"]==0){\n\t\t\t\t\t\t\t\t  //图片路径\n\t\t\t\t\t\t\t\tvar tmppath=JSON.parse(uploadFileRes.data)[\"data\"];\n\t\t\t\t\t\t\t\t var message = {\n\t\t\t\t\t\t\t\t      rid:that.rid, \n\t\t\t\t\t\t\t\t      content: tmppath,\n\t\t\t\t\t\t\t\t\t  type:1\n\t\t\t\t\t\t\t\t   };\n\t\t\t\t\t\t\t\t uni.sendSocketMessage({\n\t\t\t\t\t\t\t\t \tdata:JSON.stringify(message)\n\t\t\t\t\t\t\t\t });\t\t\n\t\t\t\t\t\t\t\t uni.showLoading({\n\t\t\t\t\t\t\t\t \ttitle:'正在发送'\n\t\t\t\t\t\t\t\t });\n\t\t\t\t\t\t\t\t setTimeout(()=>{\n\t\t\t\t\t\t\t\t \tuni.hideLoading();\t\t\t\t\t\t\t\t\t \t\n\t\t\t\t\t\t\t\t \t// 将当前发送信息 添加到消息列表。\n\t\t\t\t\t\t\t\t \tlet data = {\n\t\t\t\t\t\t\t\t \t\t\"id\":that.myself.id,\n\t\t\t\t\t\t\t\t \t\t\"content\":tmppath,\n\t\t\t\t\t\t\t\t \t\t\"s_or_r\":1,\n\t\t\t\t\t\t\t\t \t\t\"pic\":that.myself.avatar,\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\"type\":1\t\n\t\t\t\t\t\t\t\t \t}\n\t\t\t\t\t\t\t\t \tthat.talkList.push(data);\n\t\t\t\t\t\t\t\t \t\n\t\t\t\t\t\t\t\t\tthat.$nextTick(()=>{\n\t\t\t\t\t\t\t\t\t\tuni.pageScrollTo({\n\t\t\t\t\t\t\t\t\t\tscrollTop: 999999,\t// 设置一个超大值，以保证滚动条滚动到底部\n\t\t\t\t\t\t\t\t\t\tduration: 0\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t },500);\t\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tconfig.txtshow(uploadFileRes.data)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t        }\n\t\t\t\t\t     });\n\t\t\t       \n\t\t\t    }\n\t\t\t    });\n\t\t},\n\t\tbrowse(path){\n\t\t\tuni.previewImage({\n\t\t\t            urls:[path],\n\t\t\t    });\n\t\t}\n\t\t\n\t}\n}\n","import mod from \"-!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1587563823158\n      var cssReload = require(\"D:/Program Files/hbuilderx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}